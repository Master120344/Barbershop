<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Appointment - Clean Cutz</title>
    <link rel="stylesheet" href="booking_mobile.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- FullCalendar CSS -->
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/main.min.css' rel='stylesheet'>

    <style>
        /* Custom styles for calendar view */
        #calendar-container {
            margin-top: 30px;
            background-color: var(--dark-grey);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #333;
        }
        .fc-theme-standard .fc-scrollgrid {
            border: 1px solid #444; /* Match form group border */
        }
        .fc-today-button, .fc-prev-button, .fc-next-button, .fc-dayGridMonth-button, .fc-timeGridWeek-button, .fc-timeGridDay-button {
            background-color: var(--secondary-color) !important;
            color: #000 !important;
            border: none !important;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s ease;
        }
        .fc-today-button:hover, .fc-prev-button:hover, .fc-next-button:hover, .fc-dayGridMonth-button:hover, .fc-timeGridWeek-button:hover, .fc-timeGridDay-button:hover {
            background-color: #b8952a !important; /* Darker gold on hover */
        }
        /* Styling for different event types */
        .fc-event.fc-event-booked { /* Booked slots */
            background-color: var(--error-color);
            border-color: var(--error-color);
            color: var(--text-color);
        }
        .fc-event.fc-event-available { /* Available slots */
            background-color: var(--success-color);
            border-color: var(--success-color);
            color: #000; /* Black text for better contrast on green */
        }
        /* Make calendar clickable to potentially pre-fill form */
        .fc-daygrid-day-frame, .fc-timegrid-slot-con {
            cursor: pointer;
        }
        .fc-daygrid-day-frame:hover, .fc-timegrid-slot-con:hover {
            background-color: #383838 !important; /* Slightly lighter on hover */
        }
    </style>
</head>
<body>
    <header>
        <div class="site-title">CLEAN CUTZ</div>
        <div class="hamburger">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <nav class="nav-menu">
            <ul>
                <li><a href="index_mobile.html">Home</a></li>
                <li><a href="services_mobile.html">Services</a></li>
                <li><a href="index_mobile.html#about">About</a></li>
                <li><a href="booking_mobile.html">Book</a></li>
                <li><a href="index_mobile.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="booking-form-section">
            <h2>Book Your Appointment</h2>
            <p class="form-intro">Please fill in your details and select your preferred time. We'll confirm your booking.</p>
            
            <!-- Display selected services -->
            <div id="selected-services-summary" class="form-group">
                <label>Selected Services</label>
                <div id="services-list-display" class="services-list-display">
                    <p class="no-services-message">No services selected yet. Go back to the <a href="services_mobile.html">Services page</a> to choose.</p>
                </div>
            </div>

            <form id="appointment-form" novalidate>
                <!-- Full Name -->
                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <div class="input-wrapper">
                        <span class="input-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg></span>
                        <input type="text" id="fullName" name="fullName" placeholder="Enter your full name" required>
                    </div>
                    <div class="error-message" data-for="fullName"></div>
                </div>

                <!-- Email Address -->
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <div class="input-wrapper">
                         <span class="input-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg></span>
                        <input type="email" id="email" name="email" placeholder="you@example.com" required>
                    </div>
                    <div class="error-message" data-for="email"></div>
                </div>

                <!-- Phone Number -->
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <div class="input-wrapper">
                        <span class="input-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.02.74-.25 1.02l-2.2 2.2z"/></svg></span>
                        <input type="tel" id="phone" name="phone" placeholder="123-456-7890" required maxlength="12">
                    </div>
                    <div class="error-message" data-for="phone"></div>
                </div>
                
                <!-- Hidden input for selected services -->
                <!-- FIX: Changed name to 'service' to match PHP processing -->
                <input type="hidden" id="selectedServicesInput" name="service" required>

                <!-- Date & Time -->
                <div class="form-group-inline">
                    <div class="form-group">
                        <label for="bookingDate">Date</label>
                        <div class="input-wrapper">
                            <span class="input-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19,4H17V2H15V4H9V2H7V4H5A2,2,0,0,0,3,6V20a2,2,0,0,0,2,2H19a2,2,0,0,0,2-2V6A2,2,0,0,0,19,4M19,18H7V7H19V18Z"/></svg>
                            </span>
                            <input type="date" id="bookingDate" name="bookingDate" required>
                        </div>
                        <div class="error-message" data-for="bookingDate"></div>
                    </div>
                    <div class="form-group">
                        <label for="bookingTime">Time</label>
                        <div class="input-wrapper">
                            <span class="input-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12,20a8,8,0,0,0,8-8V8a8,8,0,0,0-16,0v4a8,8,0,0,0,8,8Zm0-14a6,6,0,0,1,6,6H6A6,6,0,0,1,12,6Zm0,12a6,6,0,0,1-5.64-4H17.64A6,6,0,0,1,12,18Z"/></svg>
                            </span>
                            <input type="time" id="bookingTime" name="bookingTime" required min="09:00" max="18:00">
                        </div>
                        <div class="error-message" data-for="bookingTime"></div>
                    </div>
                </div>

                <!-- Additional Notes -->
                <div class="form-group">
                    <label for="comments">Additional Notes (optional)</label>
                    <textarea id="comments" name="comments" placeholder="Any special requests or details?" maxlength="1000"></textarea>
                    <div class="char-counter">0 / 1000</div>
                </div>

                <!-- Submit Button -->
                <button type="submit" id="submit-booking-button" class="cta-button">
                    <span class="button-text">Request Booking</span>
                    <span class="button-loader"></span>
                </button>
            </form>
            
            <div id="form-response-message" class="response-message"></div>
        </section>

        <!-- Calendar Section -->
        <section id="availability-calendar-section">
            <h2>Check Availability</h2>
            <div id="calendar-container">
                <div id="calendar"></div>
            </div>
        </section>
    </main>

    <footer>
        <p>Â© 2025 Clean Cutz. All rights reserved.</p>
    </footer>

    <!-- jQuery (required by FullCalendar for some versions, good to have) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- FullCalendar JS -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/main.min.js'></script>
    <script src="booking_mobile.js"></script>
</body>
</html>